<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EduSoft ‚Äî Demo (Vanilla JS)</title>
  <meta name="description" content="Demo interactiva de la plataforma EduSoft S.A.S. ‚Äî Vanilla JS, offline-first, accesibilidad y anal√≠tica." />
  <style>
    /* ====== Reset & base ====== */
    :root{
      --bg:#f6fbff; --card:#ffffff; --primary:#0b63d0; --accent:#14b37d; --muted:#6b7280; --glass: rgba(255,255,255,0.6);
      --radius:14px; --shadow: 0 6px 18px rgba(16,24,40,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,Segoe UI,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#eaf4ff);color:#0f172a}
    .app{max-width:1100px;margin:28px auto;padding:24px}
    header{display:flex;align-items:center;gap:18px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--primary),#22a6ff);display:grid;place-items:center;color:#fff;font-weight:700;box-shadow:var(--shadow)}
    h1{margin:0;font-size:20px}
    .tag{font-size:12px;color:var(--muted)}

    /* layout */
    .grid{display:grid;grid-template-columns:300px 1fr;gap:20px;margin-top:18px}
    nav{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow)}
    main{background:transparent}

    /* nav items */
    .usercard{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .avatar{width:48px;height:48px;border-radius:10px;background:linear-gradient(180deg,#fff6, #0002);display:grid;place-items:center;font-weight:700}
    .navlist{display:flex;flex-direction:column;gap:8px}
    .navbtn{padding:10px;border-radius:10px;border:1px solid #eef2f7;background:transparent;cursor:pointer;text-align:left}
    .navbtn.active{background:linear-gradient(90deg,var(--primary),#1f8fe2);color:#fff;border:none}

    /* content cards */
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow);margin-bottom:16px}
    .row{display:flex;gap:12px;align-items:center}
    .course{display:flex;gap:12px;padding:12px;border-radius:10px;border:1px dashed #eef6ff}

    /* dashboard stats */
    .stats{display:flex;gap:12px}
    .stat{flex:1;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#f6fbff);text-align:center}

    /* responsive */
    @media(max-width:900px){.grid{grid-template-columns:1fr;}.navlist{flex-direction:row;overflow:auto}.navbtn{white-space:nowrap}}

    /* accessibility toolbar */
    .access{display:flex;gap:8px;margin-top:8px}
    .pill{background:var(--glass);padding:8px;border-radius:999px;border:1px solid #e6eefb;font-size:13px}

    /* small forms */
    input,select,textarea{padding:10px;border-radius:8px;border:1px solid #e6eef7;width:100%}
    button.primary{background:var(--primary);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.ghost{background:transparent;border:1px solid #e6eef7;padding:8px 10px;border-radius:8px;cursor:pointer}

    /* badges */
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{padding:6px 10px;background:#fff;border-radius:999px;border:1px solid #eaf5ff;font-weight:600}

    /* tiny chart */
    canvas{max-width:100%}

    footer{font-size:13px;color:var(--muted);margin-top:18px;text-align:center}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Demo EduSoft">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">ES</div>
        <div>
          <h1>EduSoft ‚Äî Demo interactiva</h1>
          <div class="tag">Plataforma adaptativa ¬∑ offline-first ¬∑ accesible</div>
        </div>
      </div>
      <div style="margin-left:auto" class="access" aria-hidden="false">
        <div class="pill">Modo: <strong id="modeLabel">Estudiante</strong></div>
        <button class="pill" id="ttsBtn">üîä Lectura</button>
        <button class="pill" id="contrastBtn">üåì Alto contraste</button>
        <button class="pill" id="exportBtn">‚¨áÔ∏è Exportar datos</button>
      </div>
    </header>

    <div class="grid">
      <nav aria-label="Navegaci√≥n principal">
        <div class="usercard">
          <div class="avatar" id="userInitial">D</div>
          <div>
            <div id="userName" style="font-weight:700">Diego Florez</div>
            <div style="font-size:12px;color:var(--muted)" id="userRole">Estudiante</div>
          </div>
        </div>

        <div class="navlist" role="tablist">
          <button class="navbtn active" data-view="dashboard" role="tab">üè† Dashboard</button>
          <button class="navbtn" data-view="cursos" role="tab">üìö Cursos</button>
          <button class="navbtn" data-view="aprendizaje" role="tab">üß† Adaptativo</button>
          <button class="navbtn" data-view="analitica" role="tab">üìà Anal√≠tica</button>
          <button class="navbtn" data-view="config" role="tab">‚öôÔ∏è Configuraci√≥n</button>
        </div>

        <div style="margin-top:12px">
          <div class="badges">
            <div class="badge">Suscripci√≥n: <span id="planLbl">Prueba</span></div>
            <div class="badge">Offline: <span id="offlineState">S√≠</span></div>
          </div>
        </div>
      </nav>

      <main>
        <section id="view-dashboard" class="card view">
          <div class="row" style="justify-content:space-between">
            <h2>Resumen</h2>
            <div class="badges"><div class="badge">Puntos: <span id="points">120</span></div><div class="badge">Insignias: <span id="badgenum">3</span></div></div>
          </div>

          <div class="stats" style="margin-top:12px">
            <div class="stat">
              <div style="font-size:12px;color:var(--muted)">Progreso</div>
              <div style="font-weight:800;font-size:22px" id="progressPct">42%</div>
            </div>
            <div class="stat">
              <div style="font-size:12px;color:var(--muted)">Actividades completadas</div>
              <div style="font-weight:800;font-size:22px" id="completeCount">8</div>
            </div>
            <div class="stat">
              <div style="font-size:12px;color:var(--muted)">Tiempo activo</div>
              <div style="font-weight:800;font-size:22px" id="activeTime">12h</div>
            </div>
          </div>

          <div style="display:flex;gap:12px;margin-top:14px;flex-wrap:wrap">
            <div style="flex:1;min-width:260px">
              <div class="card">
                <h3>Actividad reciente</h3>
                <div id="recentActivities"></div>
              </div>
            </div>
            <div style="width:320px">
              <div class="card">
                <h3>Resumen semanal</h3>
                <canvas id="chartWeek" width="300" height="120" aria-hidden="false"></canvas>
              </div>
            </div>
          </div>

        </section>

        <section id="view-cursos" class="card view" style="display:none">
          <h2>Cat√°logo de Cursos</h2>
          <p class="tag">Cursos dise√±ados para adaptarse a distintos ritmos de aprendizaje.</p>
          <div id="coursesList" style="margin-top:12px"></div>
        </section>

        <section id="view-aprendizaje" class="card view" style="display:none">
          <h2>Laboratorio adaptativo</h2>
          <p class="tag">Simulaci√≥n de una ruta de aprendizaje adaptativa. Completa actividades y el sistema ajustar√° la dificultad.</p>
          <div style="margin-top:12px">
            <div id="questionArea" class="card">
              <div id="questionText">Cargando actividad...</div>
              <div style="margin-top:8px"><input id="answerInput" placeholder="Respuesta" /></div>
              <div style="margin-top:10px"><button class="primary" id="submitAnswer">Enviar</button> <button class="ghost" id="skipBtn">Saltar</button></div>
              <div style="margin-top:10px;color:var(--muted)" id="qFeedback"></div>
            </div>
            <div style="margin-top:12px" class="card">
              <h3>Progreso de la ruta</h3>
              <div id="routeLog"></div>
            </div>
          </div>
        </section>

        <section id="view-analitica" class="card view" style="display:none">
          <h2>Anal√≠tica docente / admin</h2>
          <p class="tag">Reportes en tiempo real basados en Learning Analytics (demo).</p>
          <div style="display:flex;gap:12px;margin-top:12px;flex-wrap:wrap">
            <div style="flex:1;min-width:260px" class="card">
              <h3>Top estudiantes</h3>
              <div id="topStudents"></div>
            </div>
            <div style="width:320px" class="card">
              <h3>M√©tricas</h3>
              <ul id="metricsList"></ul>
            </div>
          </div>
        </section>

        <section id="view-config" class="card view" style="display:none">
          <h2>Configuraci√≥n</h2>
          <div style="display:grid;grid-template-columns:1fr 300px;gap:12px">
            <div>
              <label>Nombre de usuario</label>
              <input id="confName" />
              <label style="margin-top:8px">Rol</label>
              <select id="confRole"><option>Estudiante</option><option>Docente</option><option>Admin</option></select>
              <label style="margin-top:8px">Plan</label>
              <select id="confPlan"><option>Prueba</option><option>Institucional</option><option>Premium</option></select>
              <div style="margin-top:12px"><button class="primary" id="saveConf">Guardar</button></div>
            </div>
            <div>
              <h3>Accesibilidad</h3>
              <div style="margin-top:8px"><button id="ttsToggle" class="ghost">Activar lectura autom√°tica</button></div>
              <div style="margin-top:8px"><button id="signToggle" class="ghost">Mostrar traducci√≥n LSM (demo)</button></div>
              <div style="margin-top:8px"><button id="syncBtn" class="primary">Forzar sincronizaci√≥n</button></div>
            </div>
          </div>
        </section>

        <footer>Demo generada localmente ‚Äî lista para desplegar en GitHub Pages. (Sin integraci√≥n real de pasarelas)</footer>
      </main>
    </div>
  </div>

  <script>
    /* ============ Demo data model ============ */
    const SAMPLE = {
      user:{name:'Diego Florez',role:'Estudiante',points:120,badges:['Inicio','Curioso','Progresor']},
      courses:[
        {id:1,title:'Matem√°ticas b√°sicas',level:1,desc:'√Ålgebra y operaciones.',progress:0.42},
        {id:2,title:'Ciencias naturales',level:2,desc:'Ciencias y experimentos.',progress:0.12},
        {id:3,title:'Programaci√≥n b√°sica',level:2,desc:'Introducci√≥n a l√≥gica y JS.',progress:0.58}
      ],
      analytics:{weekly:[3,5,4,6,8,7,2],students:[{name:'Ana',score:92},{name:'Juan',score:88},{name:'Diego',score:78}]}
    }

    /* ======= Offline-first: load/save to localStorage ======= */
    const DBKEY = 'edusoft_demo_v1';
    function saveDB(){ localStorage.setItem(DBKEY, JSON.stringify(SAMPLE)); }
    function loadDB(){
      const raw = localStorage.getItem(DBKEY);
      if(raw) return Object.assign(SAMPLE, JSON.parse(raw));
      saveDB(); return SAMPLE;
    }
    loadDB();

    /* ====== UI wiring ====== */
    const navbtns = document.querySelectorAll('.navbtn');
    navbtns.forEach(b=>b.addEventListener('click',()=>{navbtns.forEach(x=>x.classList.remove('active'));b.classList.add('active');showView(b.dataset.view)}));
    function showView(v){document.querySelectorAll('.view').forEach(s=>s.style.display='none');document.getElementById('view-'+v).style.display='block'}

    // fill user
    document.getElementById('userName').textContent = SAMPLE.user.name;
    document.getElementById('userRole').textContent = SAMPLE.user.role;
    document.getElementById('userInitial').textContent = SAMPLE.user.name.split(' ').map(n=>n[0]).slice(0,2).join('');
    document.getElementById('planLbl').textContent = 'Prueba';
    document.getElementById('points').textContent = SAMPLE.user.points;
    document.getElementById('badgenum').textContent = SAMPLE.user.badges.length;

    // recent activities
    const recentEl = document.getElementById('recentActivities');
    const sampleActs = [
      'Completaste ejercicio 3 del curso Programaci√≥n b√°sica',
      'Iniciaste la ruta adaptativa: √Ålgebra',
      'Recibiste la insignia: Curioso'
    ];
    recentEl.innerHTML = sampleActs.map(a=>`<div style="padding:8px 0;border-bottom:1px dashed #eef6ff">${a}</div>`).join('');

    // courses
    function renderCourses(){
      const el = document.getElementById('coursesList');
      el.innerHTML = SAMPLE.courses.map(c=>`
        <div class="course" aria-label="curso ${c.title}">
          <div style="width:8px;height:56px;background:linear-gradient(180deg,var(--primary),var(--accent));border-radius:8px"></div>
          <div style="flex:1">
            <div style="font-weight:700">${c.title} <span style="font-size:12px;color:var(--muted)">Nivel ${c.level}</span></div>
            <div style="font-size:13px;color:var(--muted)">${c.desc}</div>
            <div style="margin-top:8px"><progress value="${Math.round(c.progress*100)}" max="100"></progress> <small>${Math.round(c.progress*100)}%</small></div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;align-items:end">
            <button class="primary" onclick="startCourse(${c.id})">Abrir</button>
            <button class="ghost" onclick="previewCourse(${c.id})">Vista</button>
          </div>
        </div>
      `).join('');
    }
    window.startCourse = function(id){ alert('Simulaci√≥n: abriendo curso '+id) }
    window.previewCourse = function(id){ alert('Preview del curso '+id) }
    renderCourses();

    // tiny weekly chart
    const cw = document.getElementById('chartWeek');
    const ctx = cw.getContext('2d');
    function drawChart(data){
      const w = cw.width; const h = cw.height; ctx.clearRect(0,0,w,h);
      ctx.lineWidth=3; ctx.lineJoin='round'; ctx.lineCap='round';
      const max = Math.max(...data)+1; ctx.strokeStyle = '#0b63d0'; ctx.beginPath();
      data.forEach((v,i)=>{ const x = (i/(data.length-1))* (w-20)+10; const y = h - (v/max)*(h-24)-10; if(i==0) ctx.moveTo(x,y); else ctx.lineTo(x,y); ctx.fillStyle='#0b63d0'; ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.moveTo(x,y); });
      ctx.stroke();
    }
    drawChart(SAMPLE.analytics.weekly);

    // analytics
    function renderAnalytics(){
      const top = document.getElementById('topStudents');
      top.innerHTML = SAMPLE.analytics.students.map(s=>`<div style="padding:8px;border-bottom:1px solid #f1f7ff"><strong>${s.name}</strong><div style="font-size:12px;color:var(--muted)">Score ${s.score}%</div></div>`).join('');
      const m = document.getElementById('metricsList');
      m.innerHTML = '<li>Engagement diario: 72%</li><li>Churn: 4%</li><li>Tiempo promedio por sesi√≥n: 45 min</li>';
    }
    renderAnalytics();

    /* ======= Adaptive learning simulation ======= */
    let adaptiveState = {level:2,streak:0,history:[]};
    const questionsBank = [
      {id:1,q:'2+2 = ?',answer:'4',difficulty:1},
      {id:2,q:'5 * 6 = ?',answer:'30',difficulty:1},
      {id:3,q:'Resuelve: 3x + 2 = 11, x = ?',answer:'3',difficulty:2},
      {id:4,q:'¬øCu√°l es la derivada de x^2?',answer:'2x',difficulty:3},
      {id:5,q:'Explica la fotos√≠ntesis en una frase',answer:'Proceso por el cual las plantas convierten luz en energ√≠a',difficulty:2}
    ];

    function pickQuestion(){
      // pick by difficulty near adaptiveState.level
      const cand = questionsBank.filter(q=>Math.abs(q.difficulty-adaptiveState.level)<=1);
      return cand[Math.floor(Math.random()*cand.length)];
    }
    let currentQ = pickQuestion();
    function showQ(){document.getElementById('questionText').textContent = currentQ.q; document.getElementById('answerInput').value=''; document.getElementById('qFeedback').textContent='';}
    showQ();

    document.getElementById('submitAnswer').addEventListener('click',()=>{
      const ans = document.getElementById('answerInput').value.trim().toLowerCase();
      const ok = currentQ.answer.toLowerCase().includes(ans) && ans.length>0;
      if(ok){ adaptiveState.streak++; SAMPLE.user.points += 10; document.getElementById('points').textContent=SAMPLE.user.points; document.getElementById('qFeedback').textContent='‚úÖ Correcto! Dificultad ajustando...'; }
      else { adaptiveState.streak=0; document.getElementById('qFeedback').textContent='‚ùå No coincidi√≥. Explicaci√≥n: '+currentQ.answer }

      // adjust level
      if(adaptiveState.streak>=2) adaptiveState.level = Math.min(3, adaptiveState.level+1);
      if(adaptiveState.streak==0) adaptiveState.level = Math.max(1, adaptiveState.level-1);

      adaptiveState.history.push({q:currentQ.q,ok,level:adaptiveState.level,t:Date.now()});
      document.getElementById('routeLog').innerHTML = adaptiveState.history.slice(-6).map(h=>`<div style="padding:6px;border-bottom:1px dashed #eef6ff">${h.ok? '‚úÖ':'‚ùå'} ${h.q} ‚Äî nivel ${h.level}</div>`).join('');
      // next
      currentQ = pickQuestion(); setTimeout(showQ,600);
      saveDB();
    });
    document.getElementById('skipBtn').addEventListener('click',()=>{ currentQ = pickQuestion(); showQ() });

    /* ====== Accessibility: TTS and LSM placeholder ====== */
    const ttsBtn = document.getElementById('ttsBtn');
    let ttsOn = false; let ttsInterval;
    ttsBtn.addEventListener('click',()=>{
      ttsOn = !ttsOn; ttsBtn.textContent = ttsOn? 'üîà Pausar' : 'üîä Lectura';
      if(ttsOn){ speak('Bienvenido a la demo de EduSoft. Accesibilidad activada.'); }
      else { window.speechSynthesis.cancel(); }
    });
    function speak(text){ if('speechSynthesis' in window){ const u = new SpeechSynthesisUtterance(text); window.speechSynthesis.speak(u); } }

    // LSM placeholder toggles a small modal with sign-language icon
    const signToggle = document.getElementById('signToggle');
    signToggle?.addEventListener('click',()=>{ alert('Demo: aqu√≠ se mostrar√≠a la traducci√≥n autom√°tica a lengua de se√±as (m√≥dulo a integrar con avatar/servicio espec√≠fico).') });

    // contrast mode
    const contrastBtn = document.getElementById('contrastBtn'); let highContrast=false;
    contrastBtn.addEventListener('click',()=>{ highContrast=!highContrast; document.body.style.background = highContrast? '#071233' : 'linear-gradient(180deg,var(--bg),#eaf4ff)'; document.body.style.color = highContrast? '#fff' : '#0f172a'; });

    /* ======= Configuration / sync / export ======= */
    document.getElementById('confName').value = SAMPLE.user.name; document.getElementById('confRole').value=SAMPLE.user.role;
    document.getElementById('saveConf').addEventListener('click',()=>{ SAMPLE.user.name = document.getElementById('confName').value || SAMPLE.user.name; SAMPLE.user.role = document.getElementById('confRole').value; document.getElementById('userName').textContent = SAMPLE.user.name; document.getElementById('userRole').textContent = SAMPLE.user.role; saveDB(); alert('Configuraci√≥n guardada localmente.'); });

    document.getElementById('syncBtn').addEventListener('click',()=>{ alert('Sincronizaci√≥n simulada: datos guardados localmente. En producci√≥n aqu√≠ llamar√≠a a la API backend para sync.'); saveDB(); document.getElementById('offlineState').textContent = navigator.onLine? 'No' : 'S√≠'; });

    document.getElementById('exportBtn').addEventListener('click',()=>{ const data = JSON.stringify(SAMPLE, null, 2); const blob = new Blob([data],{type:'application/json'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='edusoft_demo_export.json'; a.click(); URL.revokeObjectURL(url); });

    // initial metrics
    document.getElementById('progressPct').textContent = Math.round((SAMPLE.courses.reduce((s,c)=>s+c.progress,0)/SAMPLE.courses.length)*100)+'%';
    document.getElementById('completeCount').textContent = 8;
    document.getElementById('activeTime').textContent = '12h';

    // metrics list
    document.getElementById('metricsList').innerHTML = '<li>Usuarios activos: 124</li><li>Tiempo medio de sesi√≥n: 35 min</li><li>Tasa de completitud curso: 42%</li>';

    // recent activities rendered
    document.getElementById('recentActivities').insertAdjacentHTML('beforeend','<div style="padding:8px;color:var(--muted)">Tip: Usa la vista "Adaptativo" para experimentar la l√≥gica IA.</div>');


    // first paint: set view dashboard
    showView('dashboard');

    // save periodically
    setInterval(()=>saveDB(),10000);

    // expose small API for demo
    window.__EduSoftDemo = {SAMPLE,saveDB,loadDB};
  </script>
</body>
</html>
